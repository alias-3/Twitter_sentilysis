{% extends 'base.html'%}
{% load staticfiles %}



{% block script %}
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Sentiment', 'percent'],
          ['Positivity', {{pos}} ],
          ['Negativity', {{neg}} ],
          ['Neutrality', {{net}} ]
        ]);

        var options = {
          title: 'Analysis',
          pieHole: 0.5,
          colors: ['#900C3F','#FFC300','#DAF7A6']
        };

        var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
        chart.draw(data, options);
      }
    </script>
 {% endblock %}


{% block heading %}
<div class="container" style="padding: 0">
<div style="font-size: 10em;margin-bottom: 0;font-weight: bold;margin-top:20vh">Twitter<img style="display: inline-block;" src="{%static 'img/bird.png'%}"></div>
<div style="font-size: 1.3em;font-weight: normal;line-height: 0">Sentiment Analyser</div>
</div>
{% endblock %}


{% block content %}
	<div class="container" style="margin: 5vh auto 0 auto;padding:50px 50px 0 50px;text-align: center">
	<form action="{% url 'home' %}" method="POST">
		{% csrf_token %}
		<div><input style="	
			width: 80%;
			font-size: 1.5vw;
			height: 7vh;
			color: grey;
			font-family: sans-serif;
			text-align: center;
			box-sizing: border-box;
			box-shadow: 0 8px 10px 0 rgba(0,0,0,0.30), 0 0 0 1px rgba(0,0,0,0.08);
			outline: none;
			border:1px solid #cccccc;
			border-radius: 4px;" 
		type="text" name="query" placeholder="Enter keyword" autocomplete="off"></div>
		<div style="margin: 3em">
			<select name="numtweets" class="btn btn-light">
				<option value="25">25</option>
				<option value="50">50</option>
				<option value="100">100</option>
			</select> 
			
			<input type="submit" name="submit" value="Search" class="btn btn-outline-dark"> 

			<button class="btn btn-light ">Download</button>
		</div>
	</form>
</div>
{% endblock%}


{% block results %}
{% if q != "" %}
<div class="container"><h1>Tweets: </h1></div>
<div class="container" style="padding: 0;background-color:grey">
	<ul style="list-style: none;" class="list-group list-group-flush">
		{% for tweet in tweet_list %}
		<li class="list-group-item" style="cursor: auto;">
			{{tweet.text}}
		</li>
		{% endfor %}
	</ul>
</div>
{% endif %}
{% endblock %}



{% block graph %}
{% if q != "" %}
	<div style="text-align: center;font-size: 3em;font-weight: bold;margin-top: 100px">Graph: </div>
    <div class="container" id="donutchart" style="margin:auto;padding:0; height: 500px;text-align: center;"></div>
{% endif %}
{% endblock %}}
